<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skylab Academy</title>
    <link rel="stylesheet" href="/style/form.css">
    <link rel="icon" type="image/x-icon" href="/images/logo.ico">
</head>

<body>
    <div class="section frontPage centered-print">

        <img src="/images/skyimg.jpg" alt="">
        <h1>Skylab Academy</h1>
        <h1 style="margin-top: -30px;">Mesafeli Satış Sözleşmesi</h1>



        <p style="margin-top: -5px; font-size: 20px;">
            Kursiyer Adı
        </p>
        <p style="margin-top: -15px; font-size: 30px;">
            <%= isim %>
        </p>

        <p style="margin-top: -5px; font-size: 20px;">
            Sözleşme Numarası
        </p>
        <p style="margin-top: -15px; font-size: 30px;">
            <%= agreementNumber %>
        </p>


    </div>


    <div class="page-break"></div>

    <form id="dataForm">
        <div class="section pageOne">
            <h3> 1. TARAFLAR</h3>
            <div class="agreement-text">İşbu Mesafeli Satış Sözleşmesi (<b>“Sözleşme”</b>), Skylab Academy Danışmanlık
                Eğitim ve Öğretim
                Kurumları Limited Şirketi (bundan sonra “Akademi” olarak anılacaktır) ve <b>“Akademi”</b>'nin elektronik
                ortamda sağlamış olduğu <b>“Sözleşme”</b> formunda bilgilerini beyan eden kişinin (bundan sonra
                <b> “Kursiyer”</b> olarak anılacaktır) arasında elektronik ortamda akdedilmiştir.
            </div>

            <h3> 2. SÖZLEŞMENİN KONUSU </h3>
            <div class="agreement-text">İşbu sözleşme; <b>"Kursiyer"</b>'in, <b>"Akademi"</b>'nin mevcut eğitim
                programlarında seçtiği
                eğitim
                programı
                hizmetini ve gerekli eğitim araç ve gereçleri ile ilgili usul ve esasları ile, <b>"Kursiyer"</b> ve
                <b>"Akademi"</b>'nin
                sorumluluk ve yükümlülüklerini içerir.
            </div>

            <h3> 3. KURSİYER'İN YÜKÜMLÜLÜKLERİ </h3>
            <div class="agreement-text">İşbu sözleşme gereğince; <br>

                <b>3.1. "Akademi", "Kursiyer"</b>’e belirtilen kayıt ve şartlarda eğitim hizmeti vermeyi,
                <b>"Kursiyer"</b> de
                bu
                hizmet karşılığında <b>"Akademi"</b>'nin sunmuş olduğu ödeme planında belirtilen ücreti
                <b>"Akademi"</b>‘ye
                ödemeyi kabul eder.
                <br>
                <br>
                <b>3.2. "Kursiyer" </b> eğitimlerde asla ses ve görüntü kaydedemez, kaydettiği görüntü ve sesi
                internette
                veya başka bir mecrada yayınlamaz. Yayınlandığı takdirde <b>"Kursiyer"</b> ₺250.000 tazminat
                ödemeyi
                kabul eder.
                <br>
                <br>
                <b>3.3. "Kursiyer"</b>, sözleşme ile belirlenen miktardaki ücreti, <b> "Kursiyer" </b> eğitime
                devam
                etmese dahi
                <b>"Akademi"</b>'nin sunmuş olduğu ödeme planı çerçevesinde ve tamamıyla ödemekle yükümlü
                olduğunu
                kabul ve taahhüt eder.
                <br>
                <br>

                <b> 3.4. "Kursiyer"</b>, eğitim alamayacak derecede bir sağlık sorunu ile karşılaşması halinde
                heyet
                raporunu eklemek şartıyla fesih talep edebilir. Talebin kabulü halinde toplam sözleşme
                bedelinden;
                yayın ücreti ile yazılı başvuru yaptığı tarihe kadar işlenen ders saati bedeli düşülür, geriye
                kalan
                tutardan, sözleşmenin feshinde "Akademi"'nin kusuru bulunmadığından fesih tazminatı için kesinti
                yapılmadan %100’ e tekabül eden ücret ve/veya senetleri <b>"Kursiyer"</b>‘e iade ederek sözleşme
                feshedilir. Yazılı olmayan ve belgelenmeyen talepler dikkate alınmaz.
                <br>
                <br>

                <b> 3.5. "Kursiyer"</b>, "Akademi" personelince kendisine gösterilen müfredat sunumlarını
                izleyip
                onayladığını ve bu müfredatın kendisine aktarılacağını kabul eder. Müfredat dışı konuları
                gündeme
                getirerek, konuların işlenişini ve ders planını bozmayacağını kabul eder.
                <br>
                <br>

                <b> 3.6."Kursiyer"</b>'in, devam etmekte olduğu sınıf mevcudunun 2 kişinin altına düşmesi
                halinde,
                "Akademi"'nin bu sınıfı uygun saat ve seviyedeki diğer sınıflar ile birleştirebileceğini veya
                eğitimin
                içeriğinden ödün vermeden eğitim süresini yeniden belirleyebileceğini kabul eder.
            </div>


            <div class="pageEnd">
                <div> <img src="/images/kase.png" alt=""> </div>
                <div class="user">
                    <div class="nameDiv">
                        <%= isim %>
                    </div>
                    <div class="tcnoimza"></div>
                    <label>
                        <input type="checkbox" name="terms" required>
                        Şartları ve koşulları okudum anladım kabul ediyorum. </label>
                </div>


            </div>


        </div>


        <div class="section pageTwo">

            <h3> 4. AKADEMİ'NİN YÜKÜMLÜLÜKLERİ </h3>
            <div class="agreement-text">
                İşbu sözleşme gereğince; <br>
                <b>4.1. "Akademi"</b>; belirlenen eğitim programını, belirlenen süre ve konu ile ilgili eğitim araç
                ve
                gereçlerini sunmakla yükümlüdür. <br>
                <b>4.2. "Akademi"</b>, eğitim tamamlandıktan sonra, <b>"Kursiyer"</b>’e taahhüt ettiği eğitim
                sertifikalarını,
                <b>"Kursiyer"</b> yükümlülüklerini yerine getirdiği taktirde vermekle yükümlüdür. <br>
                <b>4.3. "Akademi"</b>, sınıfın yeterli sayıya ulaşmasını temin amacıyla kurs başlama tarihini,
                sözleşmede
                belirtilen tarihten istediği bir tarih sonrasına kadar erteleyebilir. <br>
            </div>

            <h3> 5. YÜKÜMLÜLÜK DIŞI DURUMLAR </h3>
            <div class="agreement-text">
                İşbu sözleşme gereğince; <br>
                <b>5.1. "Akademi"</b> zorunlu gördüğü taktirde programlarının ve yayınlarının içeriğini ve
                eğitmenleri
                değiştirme hakkına sahiptir. <br>
                <b>5.2. "Akademi"</b>; doğal afet, mücbir sebepler, eğitmenin sağlık durumunun bozulması,
                elektrik ve
                telefon
                hattı arızası v.b. gibi nedenlerden dolayı hizmet verememe durumlarında sorumlu tutulamaz. <br>
                <b>5.3.</b> Hiçbir <b>"Akademi"</b> yetkilisi, bu sözleşmede belirtilmiş olan hususların dışında
                taahhüt
                vermeye
                yetkili kılınmamıştır. <br>
            </div>

            <h3> 6. EĞİTİM HİZMETİNİN SONLANDIRILMASI VE FESHİ </h3>
            <div class="agreement-text">
                İşbu sözleşme gereğince; <br>
                <b>6.1. "Akademi"</b>; sunduğu eğitim hizmetinin taksitlerinin zamanında, düzenli, tam ve
                sorunsuz
                olarak
                ödenmemesi durumunda tek taraflı olarak sözleşmeyi fesih eder. Bu durumda <b>"Kursiyer"</b>,
                eğitim
                bedelinin
                tamamını ödemekle yükümlüdür. <br>
                <b>6.2. "Kursiyer"</b>, eğitim başlamadan ve eğitime kayıt olduktan sonra 7 gün içinde
                sözleşmeyi iptal
                ederse,
                sözleşme bedelinin %20’sini eğitim organizasyon, ekipman ve diğer masraflarla ilgili olarak
                ödemekle
                yükümlüdür.
                Sözleşmenin feshi yazılı usulle ve noterden yapılması zorunludur. <br>
                <b>6.3. "Kursiyer"</b>, eğitim başlamadan ve eğitime kayıt olduktan 7 gün sonra sözleşmeyi
                iptal ederse
                sözleşme
                bedelinin %40’ını eğitim organizasyon, ekipman ve diğer masraflarla ilgili olarak ödemekle
                yükümlüdür.
                Sözleşmenin feshi yazılı usulle ve noterden yapılması zorunludur. <br>
                <b>6.4. "Kursiyer"</b>, eğitimin başlamasına 15 gün kala sözleşmeyi iptal ederse sözleşme
                bedelinin
                %60’ını
                eğitim organizasyon, ekipman ve diğer masraflarla ilgili olarak ödemekle yükümlüdür.
                Sözleşmenin feshi
                yazılı
                usulle ve noterden yapılması zorunludur. <br>
                <b>6.5. "Kursiyer"</b>, eğitim başladıktan sonra 7 gün içinde sözleşmeyi iptal ederse
                sözleşme bedelinin
                %90’ını
                eğitim organizasyon, ekipman ve diğer masraflarla ilgili olarak ödemekle yükümlüdür.
                Sözleşmenin feshi
                yazılı
                usulle ve noterden yapılması zorunludur. <br>
                <b>6.6. "Kursiyer"</b>, eğitim başladıktan 7 gün sonra her ne koşul olursa olsun eğitim
                bedelinin
                tamamını
                ödemekle yükümlüdür. Eğitim başladıktan 7 gün sonra kayıt sildirmek veya sözleşmenin
                feshedilmesi mümkün
                değildir. <b>"Akademi"</b>, zorunlu gördüğü durumlarda eğitimin başlangıç tarihini ileri
                alabilir,
                eğitim
                sırasında ara verebilir. Bu şekilde erteleme ve eğitime ara verme durumları fesih sebebi
                sayılamaz ve bu
                nedenlerden dolayı <b>"Kursiyer"</b> ödemelerini aksatamaz. <br>
            </div>

            <div class="pageEnd">
                <div> <img src="/images/kase.png" alt=""> </div>
                <div class="user">
                    <div class="nameDiv">
                        <%= isim %>
                    </div>
                    <div class="tcnoimza"></div>
                    <label>
                        <input type="checkbox" name="terms" required>
                        Şartları ve koşulları okudum anladım kabul ediyorum. </label>
                </div>


            </div>

        </div>


        <div class="section pageThree">

            <h3> 7. ANLAŞMAZLIK HALİ </h3>
            <div class="agreement-text">
                İşbu sözleşme gereğince <b>"Sözleşme"</b>de belirtilmiş hususların koşulsuz olarak kabul
                edildiği,
                sözleşme veya
                içerdiği hizmetler ile ilgili oluşabilecek ihtilaf ve anlaşmazlıklarda İstanbul
                Mahkemeleri ve İcra
                Müdürlüklerinin yetkili olduğu her iki tarafça kabul ve tasdik edilir. İşbu sözleşmeden
                kaynaklanacak
                olan
                ihtilaflarda <b>"Akademi"</b>’nin ticari defter, bilgi ve belgelerinin delil olduğunu,
                başka belge ve
                bilgilerin
                delil olarak kullanılamayacağını taraflar beyan, kabul ve taahhüt etmiştir.
            </div>

            <div style="height: 20px;"></div>

            <!-- Ödeme Planı moved to be directly under Section 7 (before Kursiyer) -->
            <div id="paymentplan" class="form-group">
                <label class="paymentPlanLabel">Ödeme Planı</label><br />
                <div class="paymentPlandiv">
                    <% if (imageSrc) { %>
                        <img src="<%= imageSrc %>" alt="Payment Plan" class="paymentPlanImg" />
                        <% } else { %>
                            <p>Plan bulunamadı. Lütfen yetkili ile iletişime geçin.</p>
                            <% } %>
                </div>
            </div>


            <div class="pageEnd">
                <div> <img src="/images/kase.png" alt=""> </div>
                <div class="user">
                    <div class="nameDiv">
                        <%= isim %>
                    </div>
                    <div class="tcnoimza"></div>
                    <label>
                        <input type="checkbox" name="terms" required>
                        Şartları ve koşulları okudum anladım kabul ediyorum. </label>
                </div>


            </div>


            <div class="page-break"></div>


            <h3> Kursiyer </h3>

            <div class="form-group formBlock">
                <label for="username">Adı Soyadı</label>
                <input type="text" id="username" name="username" value="<%= user.username || '' %>"
                    placeholder="Ad Soyad" required />
            </div>

            <div class="form-group formBlock">
                <label for="tcno">TC Kimlik Numarası</label>
                <input id="tcno" name="tcno" placeholder="11 haneli TC Kimlik No" min="10000000000" max="99999999999"
                    type="number" required />
            </div>


            <div class="form-group formBlock ">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" value="<%= user.email || '' %>"
                    placeholder="Email adresinizi giriniz" required />
            </div>

            <!-- Birth Date -->
            <div class="form-group formBlock">
                <label for="birthdate">Doğum Tarihi</label>
                <input type="date" id="birthdate" name="birthdate" value="<%= user.birthdate || '' %>" max=""
                    required />
                <small style="color: #666; font-size: 12px;">18 yaşından büyük olmalısınız</small>
            </div>

            <div class="form-group formBlock">
                <label for="adres">Adres</label>
                <textarea id="adres" name="adres" placeholder="Adres"><%= user.description || '' %></textarea>
            </div>

            <!-- Phone Number -->
            <div class="form-group formBlock">
                <label for="phone">Telefon Numarası</label>
                <input type="text" pattern="[0-9]*" id="phone" name="phone" value="<%= user.phone || '' %>"
                    placeholder="0505 555 55 55" maxlength="11" minlength="11" required />
            </div>



            <div class="form-group formBlock">
                <label for="course">Kurs</label>
                <div id="course" name="course">
                    <%= course %>
                </div>
            </div>





            <div class="pageEnd">
                <div> <img src="/images/kase.png" alt=""> </div>
                <div class="user">
                    <div class="nameDiv">
                        <%= isim %>
                    </div>
                    <div class="tcnoimza"></div>
                    <label>
                        <input type="checkbox" name="terms" required>
                        Şartları ve koşulları okudum anladım kabul ediyorum. </label>
                </div>


            </div>

        </div>

        <div class="page-break"></div>


        <div class="pageFour section">



            <div class="form-group formBlock  ">
                <label for="kimlik">Kimlik Ön Yüz</label>
                <input type="file" id="kimlik" name="kimlik" accept="image/*" required />
                <div id="compressionProgressFront"></div>
            </div>
            <div class="kimlikfoto">

                <img id="imagePreviewkimlik" class="file-preview" />
            </div>

            <div class="form-group formBlock">
                <label for="kimlik2">Kimlik Arka Yüz</label>
                <input type="file" id="kimlik2" name="kimlik2" accept="image/*" required />
                <div id="compressionProgressBack"></div>
            </div>
            <div class="kimlikfoto">
                <img id="imagePreviewkimlik2" class="file-preview" />

            </div>




            <div class="pageEnd">
                <div> <img src="/images/kase.png" alt=""> </div>
                <div class="user">
                    <div class="nameDiv">
                        <%= isim %>
                    </div>
                    <div class="tcnoimza"></div>
                    <label>
                        <input type="checkbox" name="terms" required>
                        Şartları ve koşulları okudum anladım kabul ediyorum. </label>
                </div>


            </div>

        </div>

        <!-- Submit button moved here to preserve functionality after relocating payment plan -->
        <button id="sign" type="submit">İmzala</button>
    </form>

    <!-- Feedback Messages Container -->
    <div id="feedbackContainer"
        style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 9999; max-width: 500px; width: 90%; padding: 30px; border-radius: 12px; text-align: center; font-family: Arial, sans-serif; box-shadow: 0 10px 30px rgba(0,0,0,0.3); border: 2px solid;">
        <div id="feedbackIcon" style="font-size: 48px; margin-bottom: 15px;"></div>
        <div id="feedbackTitle" style="font-size: 24px; font-weight: bold; margin-bottom: 10px;"></div>
        <div id="feedbackMessage" style="font-size: 16px; margin-bottom: 15px; line-height: 1.5;"></div>
        <button id="feedbackClose"
            style="background: #007bff; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; font-size: 16px; font-weight: bold;">Tamam</button>
    </div>

    <!-- Overlay for feedback -->
    <div id="feedbackOverlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9998;">
    </div>

    <pre id="response"></pre>
    <script src="/public/imageCompression.js"></script>
    <script src="/public/script.js"></script>
</body>

</html>


<script>
    // Make user data accessible to external script
    window.agreementNumber = "<%= agreementNumber %>";
    // Save form data to localStorage on change (excluding file inputs)
    document.querySelectorAll('#dataForm input, #dataForm textarea, #dataForm select').forEach(element => {
        // Skip file inputs as they cannot be saved/restored
        if (element.type === 'file') {
            return;
        }

        element.addEventListener('input', () => {
            if (element.type === 'checkbox') {
                localStorage.setItem(element.name, element.checked.toString());
            } else {
                localStorage.setItem(element.name, element.value);
            }
        });
    });

    // Load saved form data on page load (excluding file inputs)
    window.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('#dataForm input, #dataForm textarea, #dataForm select').forEach(element => {
            // Skip file inputs as they cannot be programmatically set
            if (element.type === 'file') {
                return;
            }

            const savedValue = localStorage.getItem(element.name);
            if (savedValue !== null) {
                if (element.type === 'checkbox') {
                    element.checked = savedValue === 'true';
                } else {
                    element.value = savedValue;
                }
            }
        });
    });

    // Sync all 'terms' checkboxes when any one is clicked
    document.addEventListener('DOMContentLoaded', () => {
        const termsCheckboxes = document.querySelectorAll('input[name="terms"]');

        termsCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                const isChecked = checkbox.checked;

                // Update all other terms checkboxes to match the clicked one
                termsCheckboxes.forEach(otherCheckbox => {
                    if (otherCheckbox !== checkbox) {
                        otherCheckbox.checked = isChecked;
                        // Also save to localStorage
                        localStorage.setItem(otherCheckbox.name, isChecked.toString());
                    }
                });
            });
        });
    });

    // Sync TC number input with all tcnoimza divs
    document.addEventListener('DOMContentLoaded', () => {
        const tcnoInput = document.querySelector('input[name="tcno"]');
        const tcnoimzaDivs = document.querySelectorAll('.tcnoimza');

        if (tcnoInput && tcnoimzaDivs.length > 0) {
            // Function to update all tcnoimza divs
            const updateTcnoimzaDivs = () => {
                const tcnoValue = tcnoInput.value;
                tcnoimzaDivs.forEach(div => {
                    div.textContent = tcnoValue;
                });
            };

            // Update on input change
            tcnoInput.addEventListener('input', updateTcnoimzaDivs);

            // Update on page load if there's already a value
            updateTcnoimzaDivs();
        }
    });

    // Enhanced Feedback System
    function showFeedback(type, title, message) {
        const container = document.getElementById('feedbackContainer');
        const overlay = document.getElementById('feedbackOverlay');
        const icon = document.getElementById('feedbackIcon');
        const titleEl = document.getElementById('feedbackTitle');
        const messageEl = document.getElementById('feedbackMessage');

        if (type === 'success') {
            container.style.backgroundColor = '#d4edda';
            container.style.borderColor = '#c3e6cb';
            container.style.color = '#155724';
            icon.textContent = '✅';
            titleEl.textContent = title;
            messageEl.textContent = message;
        } else if (type === 'error') {
            container.style.backgroundColor = '#f8d7da';
            container.style.borderColor = '#f5c6cb';
            container.style.color = '#721c24';
            icon.textContent = '❌';
            titleEl.textContent = title;
            messageEl.textContent = message;
        } else if (type === 'warning') {
            container.style.backgroundColor = '#fff3cd';
            container.style.borderColor = '#ffeaa7';
            container.style.color = '#856404';
            icon.textContent = '⚠️';
            titleEl.textContent = title;
            messageEl.textContent = message;
        } else if (type === 'info') {
            container.style.backgroundColor = '#d1ecf1';
            container.style.borderColor = '#bee5eb';
            container.style.color = '#0c5460';
            icon.textContent = 'ℹ️';
            titleEl.textContent = title;
            messageEl.textContent = message;
        }

        // Show overlay and container
        overlay.style.display = 'block';
        container.style.display = 'block';

        // Prevent body scroll when modal is open
        document.body.style.overflow = 'hidden';
    }

    function hideFeedback() {
        document.getElementById('feedbackContainer').style.display = 'none';
        document.getElementById('feedbackOverlay').style.display = 'none';
        // Restore body scroll
        document.body.style.overflow = 'auto';
    }

    // Close feedback when clicking the button or overlay
    document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('feedbackClose').addEventListener('click', hideFeedback);
        document.getElementById('feedbackOverlay').addEventListener('click', hideFeedback);

        // Prevent closing when clicking on the modal content itself
        document.getElementById('feedbackContainer').addEventListener('click', (e) => {
            e.stopPropagation();
        });
    });

    // Test function - you can call this in browser console: testFeedback('success')
    window.testFeedback = function (type = 'success') {
        const messages = {
            success: { title: 'Test Başarılı!', message: 'Bu bir test mesajıdır. Feedback sistemi çalışıyor!' },
            error: { title: 'Test Hatası!', message: 'Bu bir hata test mesajıdır. Feedback sistemi çalışıyor!' },
            warning: { title: 'Test Uyarısı!', message: 'Bu bir uyarı test mesajıdır. Feedback sistemi çalışıyor!' },
            info: { title: 'Test Bilgisi!', message: 'Bu bir bilgi test mesajıdır. Feedback sistemi çalışıyor!' }
        };
        showFeedback(type, messages[type].title, messages[type].message);
    };
</script>

<!-- http://localhost:3000/form/20250601093526  -->